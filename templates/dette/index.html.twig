{# {% extends 'base.html.twig' %}

{% block title %}Hello DetteController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello {{ controller_name }}! ✅</h1>

    This friendly message is coming from:
    <ul>
        <li>Your controller at <code>C:/Users/kotic/my_project_Synfony2024/src/Controller/DetteController.php</code></li>
        <li>Your template at <code>C:/Users/kotic/my_project_Synfony2024/templates/dette/index.html.twig</code></li>
    </ul>
</div>
{% endblock %} #}

{% extends 'base.html.twig' %}

{% block title %}Liste des Dettes{% endblock %}

{% block body %}
    <div class="container mt-5">
     <a href="{{ path('app_dette_add') }}" class="btn btn-success">Ajouter une Dette</a>

        <div class="d-flex justify-content-end mb-3">
            <font color="red"><strong>Total :</font> {{ totalMontantRestant }}</strong>
        </div>

        <!-- Tableau des dettes -->
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Client</th>
                    <th>Date de Création</th>
                    <th>Montant</th>
                    <th>Montant Versé</th>
                    <th>Montant Restant</th>
                </tr>
            </thead>
            <tbody>
                {% for dette in dettes.currentPageResults %}
                    <tr>
                        <td>{{ dette.client.surname }}</td>
                        <td>{{ dette.createAt ? dette.createAt|date('Y-m-d') : 'N/A' }}</td>
                        <td>{{ dette.montant }}</td>
                        <td>{{ dette.montantVerser }}</td>
                        <td>{{ dette.montant - dette.montantVerser }}</td> <!-- Montant restant -->
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center">Aucune dette trouvée.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Liens de pagination -->
        <div class="pagination">
            {% if dettes.hasPreviousPage %}
                <a href="{{ path('app_dette', { page: dettes.currentPage - 1 }) }}" class="btn btn-secondary">Précédent</a>
            {% endif %}

            Page {{ dettes.currentPage }} sur {{ dettes.nbPages }}

            {% if dettes.hasNextPage %}
                <a href="{{ path('app_dette', { page: dettes.currentPage + 1 }) }}" class="btn btn-secondary">Suivant</a>
            {% endif %}
        </div>
    </div>
{% endblock %}
